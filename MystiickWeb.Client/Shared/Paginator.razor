<nav aria-label="@Label">
    <ul class="pagination flex-wrap">
        <li class="page-item @(PageNumber == 0 ? "disabled" : "")"><a class="page-link" href="" @onclick="() => { if (PageNumber > 0) PageNumber--; }" @onclick:preventDefault>&laquo;</a></li>

        @for (int i = 0; i < LastPage + 1; i++)
        {
            // Need to capture the page number locally since i keeps getting incremented
            int page = i;

            <li class="page-item @(PageNumber == i ? "active" : "")"><a class="page-link" href="" @onclick="(() => PageNumber = page)" @onclick:preventDefault>@(i+1)</a></li>
        }

        <li class="page-item @(PageNumber == LastPage ? "disabled" : "")"><a class="page-link" href="" @onclick="() => { if (PageNumber < LastPage) PageNumber++; }" @onclick:preventDefault>&raquo;</a></li>
    </ul>
</nav>

@ChildContent

@code {
    [Parameter]
    public string Label { get; set; } = "";

    [Parameter]
    public IEnumerable<object>? Items { get; set; }

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public int PageSize { get; set; } = 5;

    [Parameter]
    public int PageNumber { get; set; }

    public IEnumerable<object> DisplayItems
    {
        get
        {
            if (this.Items != null)
            {
                return Items.Skip(PageNumber * PageSize).Take(this.PageSize).ToArray();
            }

            return Array.Empty<object>();
        }
    }

    public int LastPage
    {
        get
        {
            return (Items?.Count() - 1) / PageSize ?? 0;
        }
    }
}
